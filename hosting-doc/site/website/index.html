<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Webhostings - Hosting Documentation</title>
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../css/highlight.css">

  <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.min.js"></script>
  <script type="text/javascript" src="../js/highlight.pack.js"></script>
  <script src="../js/theme.js"></script>

  <style>
    body {font-size: 90%;}
    pre, code {font-size: 100%;}
    h3, h4, h5, h6 {color: #2980b9; font-weight: 300}
  </style> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> Hosting Documentation</a>
        
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
      <ul class="current">
    
        
            <li class="toctree-l1 ">
                <a class="" href="../overview">Generation 2015</a>
            </li>
        

    
        
            <li class="toctree-l1 current">
                <a class="current" href=".">Webhostings</a>
            </li>
        

    
</ul>

      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="icon icon-reorder"></i>
        <a href=".."></a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    <li>Webhostings</li>
      <li class="wy-breadcrumbs-aside">
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              <h1 id="website">website</h1>
<h2 id="permissions">Permissions</h2>
<ul>
<li>Goals<ul>
<li>Users cannot access each others Directory Structure</li>
<li>PHP is executed with User privileges</li>
<li>Webserver (User www-data) can access static Files for each User</li>
</ul>
</li>
<li>User and Groups<ul>
<li>for every Website, a User and Group with the same Name is created</li>
<li>the www-data User is Member from every Group</li>
</ul>
</li>
<li>File Owner and Permissions<ul>
<li>Owner of all Files and Folders in /home/<user>/ is the corresponding User and Group</li>
<li>Permissions should be 0640 (0750) for public readable static Files such as Images or CSS</li>
<li>to enhance Security, Files and Directories can be owned by root:<usergroup> as long as PHP Processes dont need write access to them.</li>
</ul>
</li>
</ul>
<h2 id="types">Types</h2>
<ul>
<li>Use Website types to create your suitable environment</li>
<li>typo3cms<ul>
<li>MariaDB 10.x autocreated and environment set </li>
<li>PHP-FPM 5.6 </li>
<li>nginx 1.6 with naxsi WAF (and TYPO3 white/blacklists)</li>
<li>TYPO3 6.2 cloned into /var/lib/typo3/</li>
</ul>
</li>
<li>magento<ul>
<li>MariaDB 10.x autocreated and environment set</li>
<li>PHP-FPM 5.6 with mcrypt module</li>
<li>nginx 1.6 with naxsi WAF (and magento white/blacklists)</li>
</ul>
</li>
<li>wordpress<ul>
<li>MariaDB 10.x autocreated and environment set</li>
<li>PHP-FPM 5.6 with mcrypt module</li>
<li>nginx 1.6 with naxsi WAF (and wordpress white/blacklists)</li>
</ul>
</li>
<li>php (pure PHP e.g. for NoDB solutions)<ul>
<li>use "dbtype": "mysql" to add a database</li>
<li>PHP-FPM 5.6 </li>
<li>nginx 1.6 with naxsi (and core rule set)</li>
</ul>
</li>
<li>hhvm (Facebooks HHVM - BETA)<ul>
<li>for high load sites (better performance then PHP-FPM)</li>
<li>with fallback to PHP-FPM </li>
<li>needs intensive testing</li>
<li>stack: nginx 1.6, MariaDB 10.0, PHP-FPM, HHVM)</li>
</ul>
</li>
<li>html (pure HTML, just static content) <ul>
<li>nginx 1.6 with naxsi (and core rule set)</li>
</ul>
</li>
<li>other types on request (node.js, ruby etc.)</li>
</ul>
<h2 id="tls">TLS</h2>
<ul>
<li>Add a TLS / SSL certificate over hiera and enable SPDY (automatically)</li>
<li>ssl_key: generated private key</li>
<li>ssl_cert: signed certificate with 2 intermediate certificates</li>
<li>please pay attention to the hiera format</li>
</ul>
<h2 id="environments">Environments</h2>
<ul>
<li>There are 3 kinds of environments available: </li>
<li>PROD<ul>
<li>live sites only!</li>
<li>no htpasswd protection</li>
<li>error log level "quiet"</li>
</ul>
</li>
<li>STAGE <ul>
<li>for stage / preview / testing access</li>
<li>htpasswd protected (htpasswd option with crypted string in hiera necessary)</li>
<li>phpinfo enabled</li>
<li>error log level "noisy"</li>
</ul>
</li>
<li>DEV<ul>
<li>for development</li>
<li>htpasswd protected (htpasswd option with crypted string in hiera necessary)</li>
<li>phpinfo enabled</li>
<li>error log level "noisy"</li>
</ul>
</li>
</ul>
<h2 id="other-settings-and-options">Other settings and options</h2>
<ul>
<li>There are many things you can configure over hiera (Load modules, set options etc.)</li>
<li>manage SSH Keys</li>
<li>add modules (e.g. Varnish, Memcache, Redis)</li>
<li>set firewall rules </li>
</ul>
<h2 id="hiera-example">Hiera Example</h2>
<pre><code>website::sites: 
   &quot;examplenet&quot;:
    &quot;password&quot;:    &quot;1234&quot;
    &quot;server_name&quot;: &quot;typo3.example.net www.typo3.example.net&quot;
    &quot;env&quot;:         &quot;PROD&quot;
    &quot;type&quot;:        &quot;typo3cms&quot;
   &quot;devexamplenet&quot;:
    &quot;password&quot;:    &quot;1234&quot;
    &quot;server_name&quot;: &quot;dev.example.net www.dev.example.net&quot;
    &quot;env&quot;:         &quot;DEV&quot;
    &quot;htpasswd&quot;:    &quot;iequ8eeL1Eish0F&quot;
    &quot;type&quot;:        &quot;typo3cms&quot;
   &quot;phpexamplenet&quot;:
    &quot;server_name&quot;: &quot;php.example.net&quot;
    &quot;env&quot;:         &quot;PROD&quot;
    &quot;type&quot;:        &quot;php&quot;
   &quot;hhvmexamplenet&quot;:
    &quot;server_name&quot;: &quot;hhvm.example.net&quot;
    &quot;env&quot;:         &quot;PROD&quot;
    &quot;type&quot;:        &quot;php&quot;
    &quot;dbtype&quot;:      &quot;mysql&quot;
    &quot;password&quot;:    &quot;ohQueeghoh0bath&quot;
   &quot;htmlexamplenet&quot;:
    &quot;server_name&quot;: &quot;html.example.net&quot;
    &quot;env&quot;:         &quot;PROD&quot;
    &quot;type&quot;:        &quot;html&quot;
   &quot;magentoexample&quot;:
    &quot;server_name&quot;: &quot;magento.example.net&quot;
    &quot;env&quot;:         &quot;PROD&quot;
    &quot;type&quot;:        &quot;magento&quot;
    &quot;password&quot;:    &quot;Aiw7vaakos04h7e&quot;
    &quot;ssl_key&quot;: |
     -----BEGIN PRIVATE KEY-----
     MIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQDRHc47/0zg+cAg
     MkHKY1U7TOFChPawiNmU94MYjOTzK/Lc4C2op1sDCAP4Ow+qx7BK8NLJkHUPyOXU
     zjTTTUN/dGoElGz4gFaCCkMhk8hRZEs8jTwAm8tq4ruUVk9DIgQ9K/potm5kzT/T
     KyW85hETMLi+tRw9Kbn/j4QljWmqcd4mPWyaMT1o4lDTszq7NCHGch+dxa4FJYib
     z05C6+BVpw9w+BWFERlbgG5hvMMXtxexlju24e2fJV/TPCVbgDk/ecFDhupRMdj9
     ZKrlPcUZNReWxgX+ZGT8YfWI2tYfW9+H6iVvcwV2gftiDp4+N4r4Ae52cMFxcKBR
     5fn4i8hbAgMBAAECggEAYv66MBr3GRYChvtju9z0b2NAzE3HvuC6KFRYAlpI1Hl8
     umWCF/JKGpBD2NKU4yMvaPrCvtsdH8DaVLjdtx4/kunYepyNTcLrsRoMl6uvTCCv
     oVW3Dw6x6MK3TEzjrwM+gHr+S235qsyjp2MotVkwwiXxf46bdLT5MWuOgnyEhkQQ
     cmv6qDmjgDP5vH5r4riAlPKMq+jGtLc/2QWs22UxQS0/a7n0pks472AonLI8r1M8
     sYcCAC6uEvxRZdVcJOlRK78dPI3NLxFhSbvv/GcVOypyhvQ3uVYV71xA/AgcpBLd
     Fc2FULRCCU/UEjmo62uYNkG09lCchBwK8BLYYWrCoQKBgQDqL5Eo9oLMTuzysu8I
     vemXODOTfxQb1OTH1dyA4kSAtmNF2IO5rNnvVsS5YlbSjZMEXRMYTSflp7L7ae2l
     XLqjhijdB6l5cdgsPyHD2phYOvJzWMuzjkCtIjm5QfdMfsUZnBSPbwaRF1zWxbVn
     mHlWi3Zcu8U65l9gsJviZelqqwKBgQDkmG4W1SEySON4i44JwzsmXQHP1d8KHES1
     hB1IETNYV2HzIAWnnX/fqPwqyahzegKTGut9U7kJ8QHsHvz56nHdiQ8zw4BZxQPw
     j4Pms1IpzpO48yf4swskqwgkk5W6wTHCD/Q48tqFtAMPwC/D88F966ipc6lyldsJ
     UXvLeeMZEQKBgGTHYZWaOAGKOYfcHufJKnwMEI350wKDJI0m6ISCWu51DtWg7lb6
     HrNTyMbqnehwSoNHNo9vrKq0914gYMeX1y3F71HnGTSNHHU2Gea57HOTsoCXBtpX
     blfTcbnavHyr1VBHDcYIBnBr+GTooj9Zq2XmEGKp35+QQh1PA1ZzevaPAoGASdop
     Lv06VVmRC9/iSqslT/aaYEATZ9vMIuyE3USZVwAcKAT/brCGoIaiuVwfLPeNH2OC
     EyJaVKjlWxiD2GXy1YSzQaD2tYneBPkIvx7N+62+sfD0x/doMTeEUPTRWd2SqsSm
     vUNQcAPBPXR0uhTlPT5GZkB0zQ03D6KgoRNG2FECgYEAgXPJjIsqhcC0PNEuRgdC
     9pZq+Prvp4TniVwQKyPniw/FjAplI4uN/+1fiYPexaLzINnXUuvOTYPABec3T2DZ
     GV0lffmdZ+CleU1Xi5DjLGn8m0Gdy6mecE2Le9/Q13o3owF9rm0Drhqqd8T6vVt3
     hiw7C+lCp2XheqP+QchwxiY=
     -----END PRIVATE KEY-----
    &quot;ssl_cert&quot;: |
     -----BEGIN CERTIFICATE-----
     MIIEATCCAumgAwIBAgIJAMdVCMOVZl30MA0GCSqGSIb3DQEBCwUAMIGWMQswCQYD
     VQQGEwJDSDEPMA0GA1UECAwGWnVyaWNoMQ8wDQYDVQQHDAZadXJpY2gxIzAhBgNV
     BAoMGnNub3dmbGFrZSBwcm9kdWN0aW9ucyBHbWJIMRowGAYDVQQDDBF0eXBvMy5l
     eGFtcGxlLm5ldDEkMCIGCSqGSIb3DQEJARYVd2VibWFzdGVyQGV4YW1wbGUubmV0
     MB4XDTE1MDIxMjEyMDU1MloXDTI1MDIwOTEyMDU1MlowgZYxCzAJBgNVBAYTAkNI
     MQ8wDQYDVQQIDAZadXJpY2gxDzANBgNVBAcMBlp1cmljaDEjMCEGA1UECgwac25v
     d2ZsYWtlIHByb2R1Y3Rpb25zIEdtYkgxGjAYBgNVBAMMEXR5cG8zLmV4YW1wbGUu
     bmV0MSQwIgYJKoZIhvcNAQkBFhV3ZWJtYXN0ZXJAZXhhbXBsZS5uZXQwggEiMA0G
     CSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDRHc47/0zg+cAgMkHKY1U7TOFChPaw
     iNmU94MYjOTzK/Lc4C2op1sDCAP4Ow+qx7BK8NLJkHUPyOXUzjTTTUN/dGoElGz4
     gFaCCkMhk8hRZEs8jTwAm8tq4ruUVk9DIgQ9K/potm5kzT/TKyW85hETMLi+tRw9
     Kbn/j4QljWmqcd4mPWyaMT1o4lDTszq7NCHGch+dxa4FJYibz05C6+BVpw9w+BWF
     ERlbgG5hvMMXtxexlju24e2fJV/TPCVbgDk/ecFDhupRMdj9ZKrlPcUZNReWxgX+
     ZGT8YfWI2tYfW9+H6iVvcwV2gftiDp4+N4r4Ae52cMFxcKBR5fn4i8hbAgMBAAGj
     UDBOMB0GA1UdDgQWBBSSJyPyLa8CNKMDR3BAOcuuzzEqlTAfBgNVHSMEGDAWgBSS
     JyPyLa8CNKMDR3BAOcuuzzEqlTAMBgNVHRMEBTADAQH/MA0GCSqGSIb3DQEBCwUA
     A4IBAQAMKv2Kdw2LkskJm/GAkEsavoYf6qAPruwcsp8cx+7doXOpptZ/w+m8NK8i
     6ffi65wQ4TGlFxEvXM1Ts4S1xF/+6JVnnp8RVGvfgDL7xi6juMqbtM5yBxjHKO6W
     AuxOmwPcd6cO5qL+MCSgIe13bn/V4bw/JLv9LONuwXHJuv0FEoazbSyB6uTwYf2D
     pWHEkXvkz5A1hqu3y2jFq2cQffoO31GGx29U3uSl+Esp5bL/J0bQd3TUbwvu6FY1
     NgUR7Mx1t/4/uk9FRl87d2rRslc5VyvD5v7MFE6jYJap74j5BrrfUUTNbzVXdPCS
     v8jOaIjDp5AMoZxbPMlv/5Tk85uF
     -----END CERTIFICATE-----

</code></pre>


            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="../overview" class="btn btn-neutral" title="Generation 2015"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
    <!-- Copyright etc -->
    </p>
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>

  </div>

<div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
        
      <span><a href="../overview" style="color: #fcfcfc;">&laquo; Previous</a></span>
      <span style="margin-left: 15px"><a href="" style="color: #fcfcfc">Next &raquo;</a></span>
    </span>
</div>
</body>
</html>